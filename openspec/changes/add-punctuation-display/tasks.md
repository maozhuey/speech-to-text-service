# 实施任务清单

## 阶段1：调研与验证
- [x] 验证FunASR是否支持流式识别API
  - [x] 查阅FunASR文档（ModelScope pipeline不支持流式）
  - [x] 测试流式识别接口
  - [x] 确认返回格式
- [x] 评估降级方案可行性
  - [x] 设计前端"识别中"提示
  - [x] 确认降级触发条件（采用方案B：前端模拟）

## 阶段2：后端开发（如支持流式）
- [x] 跳过（FunASR不支持流式，使用降级方案）

## 阶段3：前端开发
- [x] 实现 `updateInterimText()` 方法
  - [x] 创建/更新中间结果显示元素
  - [x] 设置灰色斜体样式
  - [x] 自动滚动到底部
- [x] 修改 `addFinalText()` 方法
  - [x] 添加清除中间结果逻辑
  - [x] 保持现有最终结果显示
- [x] CSS样式
  - [x] 添加 `.interim-text` 样式（Tailwind类）
  - [x] 实现过渡动画（transition-opacity）
- [x] 错误处理
  - [x] 处理识别失败时清除中间结果
  - [x] 停止录音时清除中间结果

## 阶段4：降级方案实现
- [x] 前端降级逻辑
  - [x] 显示"识别中..."提示
  - [x] 使用processing消息触发
- [x] 后端降级逻辑
  - [x] 保持现有消息格式

## 阶段5：测试
- [x] 手动测试
  - [x] 中间结果显示逻辑
  - [x] 样式切换（灰色→白色）
  - [x] 错误处理
- [x] 集成测试
  - [x] 端到端识别流程
- [x] 性能测试
  - [x] DOM更新性能（使用局部更新）

## 阶段6：文档和发布
- [ ] 更新README
  - [ ] 添加实时显示功能说明
  - [ ] 更新性能指标
- [ ] 更新API文档
  - [ ] processing消息说明
- [ ] 代码审查
- [ ] 合并到主分支
